!function(a,b,c){"use strict";function d(a,b,c){return c&&"auto"!=c||!a.last().attr("data-order")||!a.last().data("order").toString().length||(c="filter_asc"),a.sort(function(a,b){var d=jQuery(a).data("order")?parseInt(jQuery(a).data("order"),10):jQuery(a).text().trim(),e=jQuery(b).data("order")?parseInt(jQuery(b).data("order"),10):jQuery(b).text().trim();if("*"!=jQuery(a).attr("data-option-value")&&"*"!=jQuery(b).attr("data-option-value")){if("asc"==c.substr(c.length-3,c.length).toLowerCase())return d<e?-1:d>e?1:0;if("desc"==c.substr(c.length-4,c.length).toLowerCase())return d>e?-1:d<e?1:0}}),a.each(function(a,c){b.append(c).append("\n")}),!0}c.infiniteScroll={addAjaxComplete:function(a){this.ajaxCompletes.push(a)},ajaxCompletes:[]};var e={};e.lastClickAvailabled=!1,e.createCookie=function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"},e.readCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null},e.eraseCookie=function(a){createCookie(a,"",-1)},e.goToByScroll=function(b){a("html,body").animate({scrollTop:a("#"+b).offset().top},"slow")},a.tzPortfolioPlusIsotope=function(c,f){var g=a(c),h=a.extend(!0,{},a.tzPortfolioPlusIsotope.defaults),i=a.extend(!0,h,f);i.params.orderby_sec.length||(i.params.orderby_sec="rdate");var j=i.params,k=i.isotope_options;switch(j.orderby_sec){default:k.core.sortBy="original-order",k.core.sortAscending=!0;break;case"order":case"rorder":k.core.sortBy="original-order",k.core.sortAscending=!0;break;case"date":k.core.sortBy="date",k.core.sortAscending=!0,i.timeline&&(k.core.sortAscending=!1);break;case"rdate":k.core.sortBy="date",k.core.sortAscending=!1;break;case"alpha":k.core.sortBy="name",k.core.sortAscending=!0;break;case"ralpha":k.core.sortBy="name",k.core.sortAscending=!1;break;case"author":case"rauthor":k.core.sortBy="date",k.core.sortAscending=!1;break;case"hits":k.core.sortBy="hits",k.core.sortAscending=!1;break;case"rhits":k.core.sortBy="hits",k.core.sortAscending=!0}return k.core.layoutMode.length||(j.layout_type.length?k.core.layoutMode=j.layout_type[0]:k.core.layoutMode="masonry"),g.tz_init=function(b){var c=a(i.mainElementSelector).width(),e=j.tz_column_width,f=0,h=0,l=0,m=0,n=0;c<g.width()&&(c=g.width()),i.columnWidth&&(e=i.columnWidth),i.timeline&&a.extend(!0,a.Isotope.prototype,{_sort:function(){var b=this.options.sortBy,c=this._getSorter,d=this.options.sortAscending?1:-1,e=function(e,f){var g=c(e,b),h=c(f,b);if(g===h&&"original-order"!==b&&(g=c(e,"original-order"),h=c(f,"original-order")),"name"==b||"hits"==b){if(a(e).attr("data-category")>a(f).attr("data-category"))return 0;if(a(e).attr("data-category")==a(f).attr("data-category"))return a(e).hasClass("TzDate")?0:g>h?1*d:0}return(g>h?1:g<h?-1:0)*d};this.$filteredAtoms.sort(e)}}),f=Math.floor(c/e),i.beforeCalculateColumn(f),h=f+1,l=h-c/e>c/e-f?f:h,m=c,n=c,l>1&&(m=Math.floor(c/l),n=2*m),i.afterCalculateColumn(l,m),g.find(".element").width(m),g.find(i.elementFeatureSelector).width(n),g.find(".element").find(".element.TzDate").width(c),i.afterColumnWidth(l,m),b&&g.find(".element").css({opacity:0}),g.imagesLoaded(function(){i.afterImagesLoaded(),b&&g.find(".element").css({opacity:1}),g.isotope({resizable:!1,itemSelector:k.core.itemSelector,layoutMode:k.core.layoutMode,sortBy:k.core.sortBy,sortAscending:k.core.sortAscending,filter:k.core.filter,masonry:{columnWidth:m},getSortData:k.core.getSortData},function(){parseInt(j.tz_show_filter,10)&&j.filter_tags_categories_order&&void 0!==d&&d(a(k.sortParentTag).find(k.sortChildTag),a(k.sortParentTag),j.filter_tags_categories_order),k.complete(),g.afterLoadPortfolio()})})},g.loadPortfolio=function(){var c=a(k.filterSelector),d=c.find(k.tagFilter),e=null,f=k.core;d.click(function(c){c.preventDefault();var d=a(this);if(d.hasClass("selected"))return!1;var h=d.parents(".option-set");h.find(".selected").removeClass("selected"),d.addClass("selected");var i=f,k=h.attr("data-option-key"),l=d.attr("data-option-value");return l="false"!==l&&l,i[k]=l,"layoutMode"===k&&"function"==typeof b.changeLayoutMode?b.changeLayoutMode(d,i):("name"==l&&("alpha"==j.orderby_sec||"alpha"!=j.orderby_sec&&"ralpha"!=j.orderby_sec?i.sortAscending=!0:"ralpha"==j.orderby_sec&&(i.sortAscending=!1)),"date"==l&&("rdate"==j.orderby_sec||"date"!=j.orderby_sec&&"rdate"!=j.orderby_sec?i.sortAscending=!1:"date"==j.orderby_sec&&(i.sortAscending=!0)),"hits"==l&&("hits"==j.orderby_sec||"hits"!=j.orderby_sec&&"rhits"!=j.orderby_sec?i.sortAscending=!1:"rhits"==j.orderby_sec&&(i.sortAscending=!0)),i=a.extend(e,i),g.isotope(i),e=i),!1})},g.triggerOnClickItem=function(){a(k.core.itemSelector).find("a").click(function(b){e.createCookie("tppLatestItem",a(this).closest(k.core.itemSelector).attr("id"),.1)})},g.afterLoadPortfolio=function(){var b=e.readCookie("tppLatestItem");null!=b&&!e.lastClickAvailabled&&a("#"+b).length&&(e.goToByScroll(b),e.lastClickAvailabled=!0)},g.tz_init(!0),a(k.filterSelector+"[data-option-key=sortBy]").children().removeClass("selected").end().find("[data-option-value="+k.core.sortBy+"]").addClass("selected"),g.loadPortfolio(),g.triggerOnClickItem(),g.vars=i,a.data(c,"tzPortfolioPlusIsotope",g),a(b).smartresize(function(){g.tz_init()}),this},a.tzPortfolioPlusIsotope.defaults={columnWidth:"",mainElementSelector:"#TzContent",containerElementSelector:"#portfolio",elementFeatureSelector:".tz_feature_item",JSON:{},timeline:!1,params:{orderby_sec:"rdate",tz_show_filter:1,filter_tags_categories_order:"auto",tz_portfolio_plus_layout:"ajaxButton",comment_function_type:"default",tz_filter_type:"categories",show_all_filter:0,tz_comment_type:"disqus",tz_show_count_comment:1,tz_column_width:233,layout_type:["masonry"]},isotope_options:{core:{itemSelector:".element",layoutMode:"",sortBy:"date",sortAscending:!1,filter:"*",getSortData:{date:function(a){var b=a.hasClass("element")&&a.attr("data-date").length?a.attr("data-date"):a.find(".create").text();return parseInt(b,10)},hits:function(a){var b=a.hasClass("element")&&a.attr("data-hits").length?a.attr("data-hits"):a.find(".hits,.tpp-item-hit").text();return parseInt(b,10)},name:function(a){var b=a.hasClass("element")&&a.find(".TzPortfolioTitle.name,.tpp-item-title.name").length?a.find(".TzPortfolioTitle.name, .tpp-item-title.name").text().trim():a.attr("data-title").length?a.attr("data-title"):"";return b.length?b:a.text().trim()}}},filterSelector:"#tz_options .option-set",tagFilter:"a",sortParentTag:"#filter",sortChildTag:"a",complete:function(){}},beforeCalculateColumn:function(){},afterCalculateColumn:function(){},afterColumnWidth:function(){},afterImagesLoaded:function(){}},a.fn.tzPortfolioPlusIsotope=function(b){if(void 0===b&&(b={}),"object"==typeof b)return this.each(function(){void 0===a(this).data("tzPortfolioPlusIsotope")?new a.tzPortfolioPlusIsotope(this,b):a(this).data("tzPortfolioPlusIsotope")})},a.tzPortfolioPlusInfiniteScroll=function(f,g){var h=a(f),i=a.extend(!0,a.tzPortfolioPlusInfiniteScroll.defaults,g),j=i.params,k=1,l=!0,m=a("div.TzDate:last").attr("data-category");if(h.infinitescroll({navSelector:i.navSelector,nextSelector:i.nextSelector,itemSelector:i.itemSelector,dataType:i.dataType,template:function(b){if(b){if(b.filter){var c=a(b.filter),c=c.map(function(){if(-1==a(i.sortParentTag).find(i.sortChildTag+'[data-option-value="'+a(this).data("option-value")+'"]').index())return this});a(i.sortParentTag).append(c);h.data("tzPortfolioPlusIsotope").loadPortfolio(),void 0!==d&&d(a(i.sortParentTag).find(i.sortChildTag),a(i.sortParentTag),j.filter_tags_categories_order)}return b.articles}},errorCallback:function(){i.errorCallback||(i.loadedText=tzNoMorePageLoadText,j.tz_portfolio_plus_layout&&"ajaxButton"!=j.tz_portfolio_plus_layout||a("#tz_append a").unbind("click").html(i.loadedText).show(),tzDisplayNoMorePageLoad?("ajaxInfiScroll"==j.tz_portfolio_plus_layout&&a("#tz_append").removeAttr("style").html('<a class="tzNomore">'+i.loadedText+"</a>"),a("#tz_append a").addClass("tzNomore")):a("#tz_append").empty(),a("#infscr-loading").remove())},loading:{msgText:i.msgText,finishedMsg:"",img:"",selector:"#tz_append"}},function(b,d,f){var g=b;if(b){if(b.articles&&!d.appendCallback){var n=a("<div/>");n.append(b.articles),g=n.children().get(),h.append(g)}a("#infscr-loading").css("display","none");var o=a(g).css({opacity:0});o.imagesLoaded(function(){o.animate({opacity:1});var f=h.data("tzPortfolioPlusIsotope");if(f.tz_init(),i.timeline)f.isotope("insert",o),o.each(function(){if(a(this).attr("class").match(/.*?TzDate.*?/i)){var b=a(this).attr("data-category");m==b?(a(this).remove(),f.isotope("reloadItems")):m=b}});else{if(f.isotope("appended",o),b.filter&&!d.appendCallback){var g=a(b.filter),g=g.map(function(){if(-1==a(i.sortParentTag).find(i.sortChildTag+'[data-option-value="'+a(this).data("option-value")+'"]').index())return this});a(i.sortParentTag).append(g),f.loadPortfolio()}f.afterLoadPortfolio(),f.triggerOnClickItem()}if(k++,l=!0,o.length&&a("div#tz_append").find("a:first").show(),c.infiniteScroll.ajaxCompletes.length&&a.each(c.infiniteScroll.ajaxCompletes,function(a,b){"function"==typeof b&&b(o,f)}),("ajaxInfiScroll"==j.tz_portfolio_plus_layout||"ajaxButton"==j.tz_portfolio_plus_layout)&&tzItemAvailable){var n=e.readCookie("tppLatestItem");null!=n&&(a("#"+n).length||h.infinitescroll("retrieve"))}})}}),"ajaxInfiScroll"==j.tz_portfolio_plus_layout&&(a(b).scroll(function(){a(b).unbind(".infscr"),l&&a(b).scrollTop()+a(b).height()>=h.offset().top+h.height()&&(l=!1,h.infinitescroll("retrieve"))}),a(b).bind("load resize",function(){a(document).height()<=a(b).height()&&h.infinitescroll("retrieve")})),j.tz_portfolio_plus_layout&&"ajaxButton"!=j.tz_portfolio_plus_layout||(a(b).unbind(".infscr"),a("div#tz_append a").click(function(){a(this).stop(),a("div#tz_append").find("a:first").hide(),h.infinitescroll("retrieve")})),("ajaxInfiScroll"==j.tz_portfolio_plus_layout||"ajaxButton"==j.tz_portfolio_plus_layout)&&tzItemAvailable){var n=e.readCookie("tppLatestItem");null!=n&&(a("#"+n).length||h.infinitescroll("retrieve"))}},a.tzPortfolioPlusInfiniteScroll.defaults={rootPath:"",msgText:'<i class="tz-icon-spinner tz-spin"></i><em>Loading the next set of posts...</em>',loadedText:"No more items to load",navSelector:"#loadaj a",nextSelector:"#loadaj a:first",itemSelector:".element",dataType:"json",Itemid:null,commentText:"Comment count:",timeline:!1,sortParentTag:"#filter",sortChildTag:"a",lang:"",errorCallback:null,ajaxComplete:function(){}},a.fn.tzPortfolioPlusInfiniteScroll=function(b){void 0===b&&(b={}),"object"==typeof b&&(void 0===a(this).data("tzPortfolioPlusInfiniteScroll")?new a.tzPortfolioPlusInfiniteScroll(this,b):a(this).data("tzPortfolioPlusInfiniteScroll"))}}(jQuery,window,window.TZ_Portfolio_Plus);